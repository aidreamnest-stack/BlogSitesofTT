<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TribleTunes Blog - Music Reviews</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Pacifico&display=swap"
    rel="stylesheet"
  />

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --bg: #0f0f0f;
      --content-bg: #181818;
      --text-primary: #ffffff;
      --text-secondary: #bbbbbb;
      --primary: #00ffc3;
      --primary-hover: #00caa3;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg);
      color: var(--text-primary);
      line-height: 1.6;
    }
    .font-logo {
      font-family: 'Pacifico', cursive;
    }
    .font-cursive {
      font-family: 'Pacifico', cursive;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="bg-content-bg shadow-md py-4">
    <div class="container mx-auto flex justify-between items-center px-4">
      <h1 class="font-logo text-3xl text-primary">TribleTunes</h1>
      <nav class="space-x-6">
        <a href="index.html" class="hover:text-primary">Home</a>
        <a href="review.html" class="hover:text-primary">Reviews</a>
        <a href="contact.html" class="hover:text-primary">Contact</a>
        <a href="about.html" class="hover:text-primary">About</a>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="text-center py-20 px-4 bg-[url('https://images.unsplash.com/photo-1507874457470-272b3c8d8ee2?auto=format&fit=crop&w=1920&q=80')] bg-cover bg-center">
    <div class="bg-black/70 p-10 rounded-lg inline-block">
      <h2 class="text-5xl font-bold mb-4 font-logo text-primary">Discover the Music</h2>
      <p class="max-w-xl mx-auto text-text-secondary">Your daily dose of song reviews, artist interviews, and everything music.</p>
    </div>
  </section>

  <!-- Posts Section -->
  <section class="container mx-auto px-4 mt-16 mb-20">
    <h2 class="font-logo text-4xl text-center mb-10">Recent Reviews</h2>

    <div id="posts-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- Posts will load automatically -->
    </div>

    <p id="loading-text" class="text-center text-text-secondary mt-8">Loading posts...</p>
  </section>

  <!-- Footer -->
  <footer class="bg-content-bg py-6 text-center text-text-secondary border-t border-gray-800">
    <p>&copy; 2025 TribleTunes. All rights reserved.</p>
  </footer>

  <!-- Dynamic Post Loader -->
  <script>
    let previousData = "";

    async function loadPosts() {
      try {
        const res = await fetch('posts.json?' + new Date().getTime()); // prevent caching
        const posts = await res.json();
        const container = document.getElementById('posts-container');
        const loadingText = document.getElementById('loading-text');

        const dataString = JSON.stringify(posts);
        if (dataString === previousData) return; // skip if no new changes
        previousData = dataString;

        container.innerHTML = ""; // clear old posts
        loadingText.style.display = 'none';

        posts.forEach(post => {
          const article = document.createElement('article');
          article.className =
            "bg-content-bg rounded-lg shadow-lg overflow-hidden flex flex-col transform hover:shadow-primary/30 hover:scale-[1.02] transition-all duration-300";

          article.innerHTML = `
            <img src="${post.image}" alt="${post.title}" class="w-full h-56 object-cover">
            <div class="p-6 flex-grow">
              <span class="text-xs font-bold text-primary uppercase tracking-widest">${post.type}</span>
              <h3 class="font-cursive text-3xl text-text-primary mt-2 mb-3">${post.title}</h3>
              <p class="text-text-secondary mb-4">${post.description}</p>
            </div>
            <a href="${post.link}" class="block p-6 pt-0 font-bold text-primary hover:text-primary-hover">Read More &rarr;</a>
          `;
          container.appendChild(article);
        });
      } catch (error) {
        console.error('Error loading posts:', error);
        document.getElementById('loading-text').textContent = 'Failed to load posts.';
      }
    }

    // Load immediately
    loadPosts();

    // Refresh every 3 minutes automatically
    setInterval(loadPosts, 180000);
  </script>
</body>
</html>



